---
- name: mysql | Install MySQL Packages
  become: yes
  apt:
    pkg: '{{ item }}'
    state: latest
    update_cache: true
  with_items:
    - mysql-server
    - mysql-client
    - python-mysqldb

- name: mysql | Copy config file with root credentials
  become: yes
  template: src=credentials.tpl dest=/etc/mysql/root.cnf

- name: Set root password
  become: yes
  shell: mysql -e "ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'mysql';"

- name: Flush privileges
  become: yes
  shell: mysql -e "FLUSH PRIVILEGES"
